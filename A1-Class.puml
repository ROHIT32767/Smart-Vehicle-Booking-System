' Problem Description:
' We anticipate the development of a software system for reserving smart bikes intended for on-campus transportation at IIIT-H. The design should support users in booking smart bikes via a mobile app and conducting payment transactions. Users should be able to complete the onboarding process, scan QR codes on bikes located in the parking lot to initiate and conclude trips, and facilitate payments manually or through an auto-deduct feature. While creating this prototype, it is essential to consider various user profiles, ensuring their unique characteristics are clearly reflected in the design, associated documentation, and during the presentation.
' For this prototype, you need to incorporate the following:
' Smart vehicle:
' ● The smart vehicles(bike, bicycle or moped) can be used by users(staff, student, teacher) by registering on the application and making payment on the same.
' ● The vehicle can be docked in docking stations provided on campus and users will be charged according to a defined scheme. The vehicle can be used both inside and outside campus. The payment can be made using the software app.
' User Account Management:
' ● The software product must allow the user to get onboarded. Once the user opens the app, they should be able to:
' ○ Create an account - You can decide on the login mechanism to be implemented
     
'  ○ Upload id - You can decide on what ids should be uploaded for various kinds of users.
' ○ Add money to Wallet - Decide on how the wallet functionality will work with respect to the payment mechanisms, boundations like minimum balance etc.
' ○ Users History - Users should be able to look at their trip history
' Bike reservation rates/charges:
' ● The payment is such that for the first x kilometers, a base rate of y rupees is taken. After that, it is at z rupees per 100 meters.
' ● The user books a vehicle using the application. Keep track of the current vehicle, money due, user details, etc. If a bike is not returned to the docking station within 8 hours and the bike is not renewed, a fine of 50 rupees is deducted every day.
' Payment Management:
' ● The user should be able to make payment for the rides they’ve taken. Payment can be made via in-app wallet. If there is sufficient money in the wallet, the amount can either be auto deducted (if so enabled by the user before) or else, can be done manually via the app.
' ● If the wallet doesn’t have sufficient money, money has to be added to the wallet via other payment options before proceeding for making the payment. Money can be added by existing UPI apps. (Other options are open to interpretation)
' ● Other options can include deducting from the salary of the user (in case of staff or professors) or adding to the fees (of students). You may add details for adding money to the wallet as per your understanding of payment systems. Your design and/or presentation must make the added details obvious.
' Support, Feedback and Ratings:
' ● Ratings should be provided indicating the satisfaction of the availed service.
' ● Additionally, user must be able to provide feedback which can improve the app or can
' help in sustaining the current software
' ● Support information in the form of documentation should be provided for users’ ease of
' travel and usability.
' Trip Management:
' ● To move the smart bike from the parking lot, the trip must be started. Also, trips can only be started and ended at the designated parking lots of the campus. Trips can be started and ended by using the bike’s QR code.
' ○ For starting the trip
' ■ Scan the QR code -> bike’s details get listed in the app -> Start the Trip
' ○ For ending the trip:

' ■ Park the bike in the parking lot -> End trip on app screen -> Scan QR code You may add more details/functionalities pertaining to this. List all the assumptions you
' make.
' Parking Lot Management:
' ● Track the availability of smart bikes in the parking lot, manage bike locations, and update bike statuses based on user actions.
' ● It should also monitor overall capacity of the parking lot, should include maintenance status (repairs if any, condition of bikes, etc.) and security features (open-ended). It should also have a data logging system facilitating system analysis and future improvements.

' Now write code to draw a class diagram for the above problem statement with various classes liker User from which student , Staff and Teachers inherit , also include Vehicle class from which bike , moped , bicycle inherit , also include classes like transaction , docking station , trip . You can make suitable assumptions wherever required
@startuml
class User{
    + userID: String 
    - userName : String
    - email : String
    - password : String
    - phone : String
    - age : int
    - walletID : String
    # verificationID: String
    - isVerified: boolean
    - isWalletEnabled: boolean
    - isAutoDeductEnabled: boolean
    - moneyDue: double
    - currentVehicleID: String
    - tripHistory : List<Trip>
    - transactionHistory : List<Transaction>
    +verify() : boolean
    +newUser() : boolean
    +addMoney() : boolean
    +getTripHistory() : List<Trip>
    +getWalletBalance() : double
    +getVerificationID() : String
    +getIsVerified() : boolean
    +getIsWalletEnabled() : boolean
    +getIsAutoDeductEnabled() : boolean
    +setPaymentMethod() : boolean
    +pay() : boolean
    +getTransactionHistory() : List<Transaction>
    +getTripHistory() : List<Trip>
    +uploadVerificationID() : boolean
}
class Student extends User{
    + rollNo : String
    - year : int
    - branch : String
    - deductFromFees : boolean
    - deductFromWallet : boolean
    +getYear() : int
    +getBranch() : String
    +getDeductFromFees() : boolean
    +getDeductFromWallet() : boolean
}
class Staff extends User{
    + staffID : String
    - designation : String
    - deductFromSalary : boolean
    - deductFromWallet : boolean
    +getDesignation() : String
    +getDeductFromSalary() : boolean
    +getDeductFromWallet() : boolean
}
class Teacher extends User{
    + teacherID : String
    - designation : String
    - deductFromSalary : boolean
    - deductFromWallet : boolean
    +getDesignation() : String
    +getDeductFromSalary() : boolean
    +getDeductFromWallet() : boolean
}

class Vehicle{
    +vehicleID : String
    -vehicleType : String
    + QRcode : String
    # reservedAt : Date
    # reservedBy : User
    - isReserved : boolean
    - Color: String
    - tyrePressure : double
    - usageHistory : List<Trip>
    +getVehicleType() : String
    +getQRcode() : String
    +getReservedAt() : Date
    +getReservedBy() : User
    +getIsReserved() : boolean
    +setVehicleStatus() : boolean
    +setReservedAt() : boolean
    +setReservedBy() : boolean
    +scanQRcode() : boolean
    +reserveVehicle() : boolean
    +returnVehicle() : boolean
    +newVehicle() : boolean
    +getUsageHistory() : List<Trip>
}
class Bike extends Vehicle{
    - fuelStatus : double
    + getfuelStatus() : double
}
class Moped extends Vehicle{
    - batteryPercentage : double
    + getBatteryPercentage() : double
}
class Bicycle extends Vehicle{
    + basketCapacity : int
    + getBasketCapacity() : int
}

interface LocationTracker {
  + startTracking(): void
  + stopTracking(): void
  + getCurrentLocation(): String
  + setDestination(destination: String): void
  + getRoute(): List<String>
  + displayMap(): void
}

class DockingStation implements LocationTracker{
    + stationID : String
    - stationName : String
    - stationLocation : String
    - vehiclesDocked : List<Vehicle>
    - stationUsageHistory : List<Trip>
    - VehicleLocations: Map<String, String>
    - stationCapacity : int
    - stationMaintenanceStatus : String
    - stationSecurityStatus : String
    + getStationName() : String
    + getStationLocation() : Stringn
    + getStationUsageHistory() : List<Trip>
    + getVehiclesDocked() : List<Vehicle>
    + dockVehicle() : boolean
    + undockVehicle() : boolean
    + newDockingStation() : boolean
    + updateVehicleLocation(VehicleID: String, location: String): void
    + updateVehicleStatus(VehicleID: String, status: String): void
    + logData(data: String): void
}

class Transaction{
    + transactionID : String
    - transactionDate : Date
    - transactionAmount : double
    - transactionType : String
    - transactionStatus : String
    - transactionRemarks : String
    - transactionBy : User
    - transactionFor : Vehicle
    + getTransactionDate() : Date
    + getTransactionAmount() : double
    + getTransactionType() : String
    + getTransactionStatus() : String
    + getTransactionRemarks() : String
    + updateTransaction() : boolean
    + deleteTransaction() : boolean
    + getTransactionBy() : User
    + getTransactionFor() : Vehicle
    + makeTransaction() : boolean
    + updateWallet() : boolean
}

class Trip{
    + tripID : String
    - tripStart : Date
    - tripEnd : Date
    - tripStartLocation : DockingStation
    - tripEndLocation : DockingStation
    - tripDistance : double
    - tripAmount : double
    - tripTransaction : Transaction
    - tripStatus : String
    - tripRemarks : String
    - tripByUserID : String
    - tripForVehicleID : String
    - tripFine : double
    - Rating : Rating
    + getTripStart() : Date
    + getTripEnd() : Date
    + getTripStartLocation() : String
    + getTripEndLocation() : String
    + getTripDistance() : double
    + getTripAmount() : double
    + getTripStatus() : String
    + getTripRemarks() : String
    + newTrip() : boolean
    + updateTrip() : boolean
    + deleteTrip() : boolean
    + getTripBy() : User
    + getTripFor() : Vehicle
    + startTrip() : boolean
    + endTrip() : boolean
    + calculateTripAmount() : double
    + updateVehicle(): boolean
}

class Rating {
    + ratingID : key
    - Stars : int 
    - Feedback : String
    + giveRating() : boolean
    + giveFeedback() : boolean
    + updateRating() : boolean
    + updateFeedback() : boolean
}

class SupportManagement{
    + ticketID : key
    - description : String
    - tags : List<String>
    - assignedTo : String
    - raisedByUserID: String
    - raiseTicket() : boolean
    - closeIssue() : boolean
    - submitFeedback(): boolean
    - updateTicket() : boolean
    - getTicketDetails() : String
    - getTicketStatus() : String
}

class Wallet implements SalaryDeduction, FeeDeduction , UPIApp{
    + walletID : String
    - walletUserID : key
    - walletBalance : double
    - walletTransactions : List<Transaction>
    + getWalletBalance() : double
    + getWalletTransactions() : List<Transaction>
    + newWallet() : boolean
    + updateWallet() : boolean
    + deleteWallet() : boolean
    + getWalletBalance() : double
    + getWalletUser() : User
    + addMoney() : boolean
    + deductMoney() : boolean
    + updateWallet() : boolean
}

interface UPIApp {
  + openUPIApp(): void
  + proceedWithUPI(): void
}

class MobileApp implements LocationTracker{
  - appVersion: String
  - deviceOS: String
  + login(): void
  + logout(): void
  + register(): void
  + openMobileApp(): void
  + proceedWithMobileApp(): void
  + payWithWallet(): void
  + showDocumentations(): void
  + updateProfile(): void
  + displayFAQs(): void
  + viewNotifications(): void
  + accessSupport(): void
  + checkInbox(): void
  + setPreferences(): void
  + planRoute(destination: String): void
  + viewPromotions(): void
  + shareTripDetails(): void
  + rateApp(): void
  + toggleNotifications(enable: boolean): void
  + viewHistory(): void
  + inviteFriends(): void
  + redeemRewards(): void
  + reportIssue(): void
}

class VerificationManager{
    + verifyUser() : boolean
    + sendVerificationCode() : boolean
    + verifyVerificationCode() : boolean
    + verifyID() : boolean
}


interface SalaryDeduction {
  + deductFromSalary(): void
}

interface FeeDeduction {
  + addToFees(): void
}

User "1" -- "0..*" Trip : Goes On >
Trip "0..*" o-- "1..*" DockingStation : Starts/Ends At
Vehicle "1" -- "0..*" Trip : Used In >
Trip "1" o-- "1" Transaction : Associated With >
User "1" -- "0..*" Transaction : Makes >
DockingStation "0..*" o-- "0..*" Vehicle : Contains
User "1" -- "1" Wallet : Owns >
Trip "1" *-- "0..1" Rating : has
User "1" -- "0..*" SupportManagement : Raises
User "0..*" -- "0..*" MobileApp : Uses
Wallet "1" *-- "0..*" Transaction : Initiates
User "0..*" -- "0..*" Vehicle : Rides >
User "0..*" -- "0..*" DockingStation : Visits >
User "1" -- "0..*" Rating : Gives >
VerificationManager "1" -- "0..*" User : Verifies >

@enduml



